(this.webpackJsonpfront_app=this.webpackJsonpfront_app||[]).push([[0],{27:function(e,t,a){e.exports=a(56)},32:function(e,t,a){},33:function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"},34:function(e,t,a){},56:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(24),s=a.n(r),l=(a(32),a(7)),c=a(8),i=a(10),u=a(9),m=(a(33),a(34),a(5)),d=a.n(m),g=a(57),p=a(58),h=a(59),E=a(60),f=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).handleLogin=function(e){e.preventDefault();var t={password:e.target.password.value,username:e.target.username.value};d.a.post("login/",t).then((function(e){e.data;n.props.setLoggedIn(!0),n.props.setStatus("logged_in")}))},n.handleRegister=function(e){e.preventDefault(),console.log(e.target.name.value);var t={username:e.target.username.value,password1:e.target.password.value,password2:e.target.password.value,email:e.target.email.value};d.a.post("signup/",t).then((function(e){e.data;n.props.setLoggedIn(!0)}))},n}return Object(c.a)(a,[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement(g.a,{className:"text-center",style:{width:"75%",marginTop:"3%"}},o.a.createElement("h4",{as:p.a},"Login"),o.a.createElement(h.a,{onSubmit:this.handleLogin},o.a.createElement(h.a.Group,{as:p.a,controlId:"username"},o.a.createElement(h.a.Control,{type:"text",placeholder:"User Name"})),o.a.createElement(h.a.Group,{as:p.a,controlId:"password"},o.a.createElement(h.a.Control,{type:"password",placeholder:"Password"})),o.a.createElement(g.a,null,o.a.createElement(E.a,{variant:"primary",type:"submit",className:"login-button"},"Login")))),o.a.createElement(g.a,{className:"text-center",style:{width:"75%",marginTop:"3%"}},o.a.createElement("h4",{as:p.a},"New account"),o.a.createElement(h.a,{onSubmit:this.handleRegister},o.a.createElement(h.a.Group,{as:p.a,controlId:"username"},o.a.createElement(h.a.Control,{type:"text",placeholder:"User Name"})),o.a.createElement(h.a.Group,{as:p.a,controlId:"email"},o.a.createElement(h.a.Control,{type:"email",placeholder:"Email"})),o.a.createElement(h.a.Group,{as:p.a,controlId:"password"},o.a.createElement(h.a.Control,{type:"password",placeholder:"Password"})),o.a.createElement(g.a,null,o.a.createElement(E.a,{variant:"primary",type:"submit",className:"login-button"},"Register")))))}}]),a}(o.a.Component),v=a(25),b=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).setUserdata=function(e){n.setState({username:e.username,phone:e.phone_number,age:e.age,email:e.email})},n.submitData=function(e){e.preventDefault();var t={phone_number:e.target.phone.value,age:e.target.age.value,email:e.target.email.value};e.target.phone.value="",e.target.age.value="",e.target.email.value="",d.a.post("user/edit/",t).then((function(e){n.setUserdata(e.data)}))},n.handleLogout=function(e){e.preventDefault(),d.a.post("logout/").then((function(e){n.props.setLoggedIn(!1)}))},n.checkLoggedin=function(e){d.a.post("logged_in/").then((function(e){n.setLoggedIn(!0)}))},n.state={username:"username",email:"email",phone:0,age:0},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;d.a.get("user/").then((function(t){console.log(t),e.setUserdata(t.data),console.log(e.state)}))}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement(g.a,{className:"text-center",style:{width:"75%",marginTop:"2%"}},o.a.createElement("h3",null,"User Info"),o.a.createElement(v.a,{striped:!0,bordered:!0,hover:!0},o.a.createElement("tbody",null,o.a.createElement("tr",null,o.a.createElement("td",null,"Username"),o.a.createElement("td",null,this.state.username)),o.a.createElement("tr",null,o.a.createElement("td",null,"Email"),o.a.createElement("td",null,this.state.email)),o.a.createElement("tr",null,o.a.createElement("td",null,"Phone no."),o.a.createElement("td",null,this.state.phone)),o.a.createElement("tr",null,o.a.createElement("td",null,"Age"),o.a.createElement("td",null,this.state.age))))),o.a.createElement(g.a,{className:"text-center",style:{width:"75%",marginTop:"2%"}},o.a.createElement("h3",{as:p.a},"Edit user info"),o.a.createElement(h.a,{onSubmit:this.submitData},o.a.createElement(h.a.Group,{as:p.a,controlId:"email"},o.a.createElement(h.a.Control,{type:"email",placeholder:"Email"})),o.a.createElement(h.a.Group,{as:p.a,controlId:"age"},o.a.createElement(h.a.Control,{type:"number",placeholder:"Age"})),o.a.createElement(h.a.Group,{as:p.a,controlId:"phone"},o.a.createElement(h.a.Control,{type:"number",placeholder:"Phone no."})),o.a.createElement(g.a,null,o.a.createElement(E.a,{variant:"primary",type:"submit",className:"login-button"},"Submit new user info")))),o.a.createElement(g.a,{style:{marginTop:"2%"}},o.a.createElement(E.a,{onClick:this.handleLogout,style:{width:"40%"}},"Logout")))}}]),a}(o.a.Component),w=a(13),C=a.n(w),y="wss://"+window.location.host+"/ws/status/",N=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).refreshDisplay=function(){n.props.setStatus("CONNECTED")},n.setupWebSocket=function(){n.ws=new WebSocket(y),n.ws.onopen=function(){console.log("ws connected"),n.props.setStatus("CONNECTED")},n.ws.onmessage=function(e){var t=JSON.parse(e.data);n.props.setStatus(t.message),setTimeout(n.refreshDisplay,2e3)},n.ws.onclose=function(){n.props.setStatus("DISCONNECTED"),n.props.loggedIn()&&(console.log("this.props.loggedIn",n.props.loggedIn),console.log("Disconnected, trying to reconnect."),setTimeout(n.setupWebSocket,2e3))}},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.setupWebSocket()}},{key:"render",value:function(){return o.a.createElement("div",null)}}]),a}(n.Component);var I=function(e){var t=null;if(document.cookie&&""!==document.cookie)for(var a=document.cookie.split(";"),n=0;n<a.length;n++){var o=C.a.trim(a[n]);if(o.substring(0,e.length+1)===e+"="){t=decodeURIComponent(o.substring(e.length+1));break}}return t};a(55);function D(){var e=I("csrftoken");d.a.defaults.headers.common["X-CSRFTOKEN"]=e}d.a.defaults.xsrfCookieName="csrftoken",d.a.defaults.xsrfHeaderName="X-CSRFTOKEN",d.a.defaults.headers.common["Content-Type"]="application/json",d.a.defaults.withCredentials=!0;var S=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).setLoggedIn=function(e){n.setState({logged_in:e})},n.setStatus=function(e){n.setState({status:e})},n.loggedIn=function(){return n.state.logged_in},n.state={logged_in:!1,status:"DISCONNECTED"},d.a.post("logged_in/").then((function(e){n.setLoggedIn(!0),n.setStatus("logged_in"),D()})).catch((function(e){D()})),n}return Object(c.a)(a,[{key:"render",value:function(){return o.a.createElement("div",{className:"App"},o.a.createElement("h3",{style:{marginTop:"1%"}},o.a.createElement("span",{class:O[this.state.status]}),"DISCONNECTED"==this.state.status&&"Login or register","CONNECTED"==this.state.status&&"Edit user details","CHANGED_DETAILS"==this.state.status&&"User details have been set"),!this.state.logged_in&&o.a.createElement(f,{setLoggedIn:this.setLoggedIn}),this.state.logged_in&&o.a.createElement("div",null,o.a.createElement(N,{loggedIn:this.loggedIn,setStatus:this.setStatus}),o.a.createElement(b,{setLoggedIn:this.setLoggedIn})))}}]),a}(o.a.Component),O={DISCONNECTED:"greyDot",CONNECTED:"greenDot",CHANGED_DETAILS:"blueDot"},k=S;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(k,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[27,1,2]]]);
//# sourceMappingURL=main.166803cf.chunk.js.map