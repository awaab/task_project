(this.webpackJsonpfront_app=this.webpackJsonpfront_app||[]).push([[0],{27:function(e,t,a){e.exports=a(56)},32:function(e,t,a){},33:function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"},34:function(e,t,a){},56:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(23),l=a.n(r),s=(a(32),a(7)),c=a(8),i=a(10),u=a(9),m=(a(33),a(34),a(5)),g=a.n(m),d=a(57),p=a(58),h=a(59),E=a(60),f=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).handleLogin=function(e){e.preventDefault(),console.log(e.target.name.value);var t={password:e.target.password.value,username:e.target.username.value};g.a.post("login/",t).then((function(e){var t=e.data;console.log(t),n.props.setLoggedIn(!0),n.props.setStatus("logged_in")}))},n.handleRegister=function(e){e.preventDefault(),console.log(e.target.name.value);var t={username:e.target.username.value,password1:e.target.password.value,password2:e.target.password.value,email:e.target.email.value};g.a.post("signup/",t).then((function(e){e.data;n.props.setLoggedIn(!0),n.props.setStatus("logged_in")}))},n}return Object(c.a)(a,[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement(d.a,{className:"text-center",style:{width:"75%",marginTop:"3%"}},o.a.createElement("h4",{as:p.a},"Login"),o.a.createElement(h.a,{onSubmit:this.handleLogin},o.a.createElement(h.a.Group,{as:p.a,controlId:"username"},o.a.createElement(h.a.Control,{type:"text",placeholder:"User Name"})),o.a.createElement(h.a.Group,{as:p.a,controlId:"password"},o.a.createElement(h.a.Control,{type:"password",placeholder:"Password"})),o.a.createElement(d.a,null,o.a.createElement(E.a,{variant:"primary",type:"submit",className:"login-button"},"Login")))),o.a.createElement(d.a,{className:"text-center",style:{width:"75%",marginTop:"3%"}},o.a.createElement("h4",{as:p.a},"New account"),o.a.createElement(h.a,{onSubmit:this.handleRegister},o.a.createElement(h.a.Group,{as:p.a,controlId:"username"},o.a.createElement(h.a.Control,{type:"text",placeholder:"User Name"})),o.a.createElement(h.a.Group,{as:p.a,controlId:"email"},o.a.createElement(h.a.Control,{type:"email",placeholder:"Email"})),o.a.createElement(h.a.Group,{as:p.a,controlId:"password"},o.a.createElement(h.a.Control,{type:"password",placeholder:"Password"})),o.a.createElement(d.a,null,o.a.createElement(E.a,{variant:"primary",type:"submit",className:"login-button"},"Register")))))}}]),a}(o.a.Component),v=a(24),b=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).setUserdata=function(e){n.setState({username:e.username,phone:e.phone_number,age:e.age,email:e.email})},n.submitData=function(e){e.preventDefault();var t={phone_number:e.target.phone.value,age:e.target.age.value,email:e.target.email.value};e.target.phone.value="",e.target.age.value="",e.target.email.value="",n.props.setStatus("changing"),g.a.post("user/edit/",t).then((function(e){console.log(e),n.setUserdata(e.data),n.props.setStatus("changed")}))},n.handleLogout=function(e){e.preventDefault(),g.a.post("logout/").then((function(e){console.log(e),n.props.setLoggedIn(!1),n.props.setStatus("login")}))},n.checkLoggedin=function(e){g.a.post("logged_in/").then((function(e){console.log(e),n.setLoggedIn(!0)}))},n.state={username:"username",email:"email",phone:0,age:0},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;g.a.get("user/").then((function(t){console.log(t),e.setUserdata(t.data),console.log(e.state)}))}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement(d.a,{className:"text-center",style:{width:"75%",marginTop:"2%"}},o.a.createElement("h3",null,"User Info"),o.a.createElement(v.a,{striped:!0,bordered:!0,hover:!0},o.a.createElement("tbody",null,o.a.createElement("tr",null,o.a.createElement("td",null,"Username"),o.a.createElement("td",null,this.state.username)),o.a.createElement("tr",null,o.a.createElement("td",null,"Email"),o.a.createElement("td",null,this.state.email)),o.a.createElement("tr",null,o.a.createElement("td",null,"Phone no."),o.a.createElement("td",null,this.state.phone)),o.a.createElement("tr",null,o.a.createElement("td",null,"Age"),o.a.createElement("td",null,this.state.age))))),o.a.createElement(d.a,{className:"text-center",style:{width:"75%",marginTop:"2%"}},o.a.createElement("h3",{as:p.a},"Edit user info"),o.a.createElement(h.a,{onSubmit:this.submitData},o.a.createElement(h.a.Group,{as:p.a,controlId:"email"},o.a.createElement(h.a.Control,{type:"email",placeholder:"Email"})),o.a.createElement(h.a.Group,{as:p.a,controlId:"age"},o.a.createElement(h.a.Control,{type:"number",placeholder:"Age"})),o.a.createElement(h.a.Group,{as:p.a,controlId:"phone"},o.a.createElement(h.a.Control,{type:"number",placeholder:"Phone no."})),o.a.createElement(d.a,null,o.a.createElement(E.a,{variant:"primary",type:"submit",className:"login-button"},"Submit new user info")))),o.a.createElement(d.a,{style:{marginTop:"2%"}},o.a.createElement(E.a,{onClick:this.handleLogout,style:{width:"40%"}},"Logout")))}}]),a}(o.a.Component),w="ws://"+window.location.host+"/ws/status/",y=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).setupWebSocket=function(){n.ws=new WebSocket(w),n.ws.onopen=function(){console.log("ws connected"),n.ws.send(JSON.stringify({abcd:"abcd"}))},n.ws.onmessage=function(e){var t=e.data;console.log(t)},n.ws.onclose=function(){console.log("Disconnected, trying to reconnect."),setTimeout(n.setupWebSocket,1e3)}},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.setupWebSocket()}},{key:"render",value:function(){return o.a.createElement("div",null)}}]),a}(n.Component),S=a(25),k=a.n(S);var I=function(e){var t=null;if(document.cookie&&""!==document.cookie)for(var a=document.cookie.split(";"),n=0;n<a.length;n++){var o=k.a.trim(a[n]);if(o.substring(0,e.length+1)===e+"="){t=decodeURIComponent(o.substring(e.length+1));break}}return t};a(55);function C(){var e=I("csrftoken");g.a.defaults.headers.common["X-CSRFTOKEN"]=e,console.log(e,"_csrfToken")}g.a.defaults.xsrfCookieName="csrftoken",g.a.defaults.xsrfHeaderName="X-CSRFTOKEN",g.a.defaults.headers.common["Content-Type"]="application/json",g.a.defaults.withCredentials=!0;var L=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).setLoggedIn=function(e){n.setState({logged_in:e})},n.setStatus=function(e){n.setState({status:e})},n.state={logged_in:!1,status:"login"},g.a.post("logged_in/").then((function(e){console.log(e),n.setLoggedIn(!0),n.setStatus("logged_in"),C()})).catch((function(e){console.log(e),C()})),n}return Object(c.a)(a,[{key:"render",value:function(){return o.a.createElement("div",{className:"App"},o.a.createElement("h3",{style:{marginTop:"1%"}},o.a.createElement("span",{class:O[this.state.status]}),"login"==this.state.status&&"Login or register","logged_in"==this.state.status&&"Edit user details","changed"==this.state.status&&"User details have been set","changing"==this.state.status&&"Sending details to server"),!this.state.logged_in&&o.a.createElement(f,{setLoggedIn:this.setLoggedIn,setStatus:this.setStatus}),this.state.logged_in&&o.a.createElement("div",null,o.a.createElement(y,null),o.a.createElement(b,{setLoggedIn:this.setLoggedIn,setStatus:this.setStatus})))}}]),a}(o.a.Component),O={login:"greyDot",logged_in:"greenDot",changed:"blueDot",changing:"yellowDot"},j=L;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(j,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[27,1,2]]]);
//# sourceMappingURL=main.7045b031.chunk.js.map